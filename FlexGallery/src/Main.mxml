<?xml version="1.0" encoding="utf-8"?>
<s:Application minWidth="955" minHeight="600" 
			   creationComplete="{(new ApplicationInitializationEvent()).dispatch()}"
			   xmlns:usercontrol="net.mgechev.view.usercontrol.*" 
			   xmlns:control="net.mgechev.control.*" 
			   xmlns:business="net.mgechev.business.*" 
			   xmlns:view="net.mgechev.view.*" 
			   xmlns:gallery="net.mgechev.view.gallery.*" 
			   xmlns:picturecontrol="net.mgechev.view.picturecontrol.*" 
			   xmlns:appcontrol="net.mgechev.view.appcontrol.*"
			   xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 		   
			   xmlns:mx="library://ns.adobe.com/flex/mx">
	
	
	<fx:Declarations>
		
		<s:Fade alphaFrom="1" alphaTo="0" duration="300" id="hidePageEffect" />
		<s:Fade alphaFrom="0" alphaTo="1" duration="300" id="showPageEffect" />
		<control:Controller id="controller" />
		<business:Services id="services" />
		<s:VerticalLayout />
	</fx:Declarations>
	

	<fx:Script>
		<![CDATA[
			import com.adobe.cairngorm.model.ModelLocator;
			
			import mx.controls.Alert;
			import mx.core.UIComponent;
			import mx.events.FlexEvent;
			
			import net.mgechev.events.appcontrol.LoginCheckEvent;
			import net.mgechev.events.appcontrol.ApplicationInitializationEvent;
			import net.mgechev.model.ViewModelLocator;
			
			[Bindable]		
			private var modelLocator:ViewModelLocator = ViewModelLocator.getInstance();

		]]>
	</fx:Script>
<mx:VBox height="100%" width="100%" horizontalAlign="center" verticalAlign="top">

	<s:Group>
	
	<appcontrol:Menu x="21" y="142" logged="{modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN}" 
					 visible="{(galleryPage.inSlideshowState || homeGalleryPage.inSlideshowState)?false:true}" />
	
	<usercontrol:LoginForm dropShadowVisible="false" 
					visible="{modelLocator.workflowState == ViewModelLocator.LOGIN_SCREEN}" />
	<usercontrol:WelcomeScreen username="{modelLocator.username}" 
					visible="{modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN}"/>
		
	<usercontrol:EditProfileForm x="200" y="178" email="{modelLocator.email}"  showEffect="{showPageEffect}"
					visible="{(modelLocator.currentPage == ViewModelLocator.EDIT_PROFILE &amp;&amp;
					modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN)}" />
	<usercontrol:RegistrationForm x="200" y="178" hideEffect="{hidePageEffect}" showEffect="{showPageEffect}"
				    visible="{(modelLocator.currentPage == ViewModelLocator.REGISTER &amp;&amp;
				    modelLocator.workflowState == ViewModelLocator.LOGIN_SCREEN)}" />
	
	<picturecontrol:UploadForm  x="200" y="178" progress="{modelLocator.uploadProgress}" hideEffect="{hidePageEffect}" showEffect="{showPageEffect}"
					visible="{(modelLocator.currentPage == ViewModelLocator.UPLOAD &amp;&amp;
					modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN)}" />
	
	<gallery:Gallery x="0" y="178" isUserpanelEnabled="true" id="galleryPage"
					hideEffect="{hidePageEffect}" showEffect="{showPageEffect}"
					visible="{(modelLocator.currentPage == ViewModelLocator.VIEW_USERS &amp;&amp;
					modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN)}"/>
	
	<gallery:Gallery x="0" y="178" id="homeGalleryPage" isUserpanelEnabled="false" hideEffect="{hidePageEffect}" 
					showEffect="{showPageEffect}" visible="{modelLocator.currentPage == ViewModelLocator.HOME}" />
	
	<picturecontrol:EditPictures x="100" y="178" hideEffect="{hidePageEffect}" showEffect="{showPageEffect}"
					visible="{(modelLocator.currentPage == ViewModelLocator.PICTURES &amp;&amp;
					modelLocator.workflowState == ViewModelLocator.WELCOME_SCREEN)}" />
	</s:Group>
</mx:VBox>
	
</s:Application>
